# å½©è™¹åŸæµè§ˆå™¨ (Rainbowcity-Browser) - é‡‘åˆ¸ï¼šå¥‘çº¦ä¸æ ‡å‡† V8.0

## **ç« èŠ‚ï¼š1.2 æ•°æ®æ¨¡å‹æ¨¡å¼ (Data Model Schema)**

## **ä¸€ã€å®šä½ä¸ä½¿å‘½ (Positioning & Mission)**

### **1.1 æ¨¡å—å®šä½**
æœ¬ç« èŠ‚å®šä¹‰å½©è™¹åŸæµè§ˆå™¨V8.0ä¸­æ‰€æœ‰æ ¸å¿ƒæ•°æ®ç»“æ„çš„"æ™ºèƒ½è½½ä½“"ã€‚è¿™äº›æ•°æ®æ¨¡å‹ä¸å†æ˜¯é™æ€çš„ä¿¡æ¯å®¹å™¨ï¼Œè€Œæ˜¯æ‰¿è½½AIå†³ç­–æ™ºæ…§çš„åŠ¨æ€ç»“æ„ï¼Œæ˜¯ç®€åŒ–æ¶æ„ä¸å¢å¼ºèƒ½åŠ›å®Œç¾ç»“åˆçš„ä½“ç°ã€‚

### **1.2 æ ¸å¿ƒé—®é¢˜**
æœ¬è§„çº¦æ—¨åœ¨è§£å†³ï¼šå¦‚ä½•ä»¥ä¸€ç§**ç®€æ´ã€æ™ºèƒ½ã€ç±»å‹å®‰å…¨**çš„æ–¹å¼ï¼Œå®šä¹‰V8.0çš„3å±‚æ„ŸçŸ¥æ•°æ®ã€12ä¸ªæ ‡å‡†å·¥å…·å‚æ•°ã€æ™ºèƒ½å†³ç­–ä¸Šä¸‹æ–‡ç­‰æ‰€æœ‰å…³é”®æ•°æ®ç»“æ„ï¼Œç¡®ä¿AIç³»ç»Ÿèƒ½å¤Ÿé«˜æ•ˆã€å‡†ç¡®åœ°ç†è§£å’Œå¤„ç†è¿™äº›ä¿¡æ¯ï¼Ÿ

### **1.3 åº”ç”¨åœºæ™¯**
- SDKå¼€å‘è€…åŸºäºSchemaç”Ÿæˆå¼ºç±»å‹çš„å®¢æˆ·ç«¯ä»£ç ï¼Œç¡®ä¿ç¼–è¯‘æ—¶ç±»å‹å®‰å…¨å’Œè¿è¡Œæ—¶æ™ºèƒ½æç¤º
- AIç³»ç»Ÿé€šè¿‡æ ‡å‡†åŒ–çš„æ•°æ®æ¨¡å‹ï¼Œå‡†ç¡®ç†è§£3å±‚æ„ŸçŸ¥ç»“æœçš„å±‚æ¬¡ç»“æ„å’Œè¯­ä¹‰å«ä¹‰
- ç³»ç»Ÿé›†æˆå•†ä½¿ç”¨ç»Ÿä¸€çš„æ•°æ®æ ¼å¼ï¼Œå®ç°ä¸åŒAIæ¡†æ¶å’Œå¹³å°çš„æ— ç¼å¯¹æ¥

### **1.4 èƒ½åŠ›è¾¹ç•Œ**
- **æœ¬æ¨¡å¼åšä»€ä¹ˆ**: å®šä¹‰V8.0ç®€åŒ–æ¶æ„çš„æ‰€æœ‰æ•°æ®ç»“æ„ã€æ™ºèƒ½å†³ç­–ä¸Šä¸‹æ–‡ã€æ ‡å‡†åŒ–å·¥å…·å‚æ•°ã€‚æä¾›JSON Schemaå’ŒTypeScriptç±»å‹å®šä¹‰ã€‚
- **æœ¬æ¨¡å¼ä¸åšä»€ä¹ˆ**: ä¸å®šä¹‰æ•°æ®çš„å­˜å‚¨å®ç°ï¼Œä¸è§„å®šæ•°æ®çš„ä¼ è¾“æœºåˆ¶ï¼Œä¸æ¶‰åŠä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚

## **äºŒã€è®¾è®¡æ€æƒ³ä¸å“²å­¦åŸºçŸ³ (Design Philosophy & Foundational Principles)**

V8.0æ•°æ®æ¨¡å‹è®¾è®¡ä½“ç°äº†"ç®€çº¦æ™ºèƒ½"çš„æ ¸å¿ƒç†å¿µï¼š

1. **å±‚æ¬¡ç®€åŒ– (`å¤§é“è‡³ç®€`)**: 3å±‚æ„ŸçŸ¥æ•°æ®ç»“æ„æ¸…æ™°é€’è¿›ï¼ŒFastâ†’Standardâ†’Deepå±‚å±‚å¢å¼ºã€‚

2. **æ™ºèƒ½å¢å¼º (`æœºå·§è‹¥ç¥`)**: æ•°æ®æ¨¡å‹å†…ç½®æ™ºèƒ½ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒè‡ªé€‚åº”å†³ç­–å’Œæ€§èƒ½ä¼˜åŒ–ã€‚

3. **ç±»å‹ä¸¥æ ¼ (`é‡‘ä¹‹åˆšæ€§`)**: ä¸¥æ ¼çš„ç±»å‹ç³»ç»Ÿç¡®ä¿æ•°æ®æ­£ç¡®æ€§ï¼Œæ”¯æŒé™æ€åˆ†æå’Œè‡ªåŠ¨éªŒè¯ã€‚

4. **æ ‡å‡†ç»Ÿä¸€ (`ä¸€ä»¥è´¯ä¹‹`)**: 12ä¸ªæ ‡å‡†å·¥å…·ä½¿ç”¨ç»Ÿä¸€çš„å‚æ•°å’Œè¿”å›å€¼æ¨¡å¼ã€‚

5. **æ‰©å±•å‹å¥½ (`ä¸æ—¶ä¿±è¿›`)**: é‡‡ç”¨å¯é€‰å­—æ®µå’Œç»„åˆæ¨¡å¼ï¼Œæ”¯æŒå‘åå…¼å®¹çš„æ¼”è¿›ã€‚

## **ä¸‰ã€æ ¸å¿ƒæ•°æ®æ¨¡å‹å®šä¹‰**

### **3.1 ä¼šè¯ä¸é…ç½®æ¨¡å‹**

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://rainbowcity.browser/schemas/v8/session.json",
  
  "definitions": {
    "SessionConfig": {
      "type": "object",
      "description": "V8.0æ™ºèƒ½ä¼šè¯é…ç½®",
      "properties": {
        "browser_engine": {
          "type": "string",
          "enum": ["chromium", "firefox", "webkit"],
          "default": "chromium",
          "description": "æµè§ˆå™¨å¼•æ“é€‰æ‹©"
        },
        "viewport": {
          "$ref": "#/definitions/Viewport",
          "description": "è§†å£é…ç½®"
        },
        "performance_mode": {
          "type": "string",
          "enum": ["efficiency", "balanced", "performance"],
          "default": "balanced",
          "description": "æ€§èƒ½æ¨¡å¼ï¼šæ•ˆç‡ä¼˜å…ˆ/å¹³è¡¡/æ€§èƒ½ä¼˜å…ˆ"
        },
        "adaptive_sensing": {
          "type": "boolean",
          "default": true,
          "description": "å¯ç”¨è‡ªé€‚åº”æ„ŸçŸ¥æ™ºèƒ½é€‰æ‹©"
        },
        "enable_decision_trace": {
          "type": "boolean",
          "default": false,
          "description": "å¯ç”¨å†³ç­–è¿‡ç¨‹è¿½è¸ª"
        },
        "resource_limits": {
          "$ref": "#/definitions/ResourceLimits",
          "description": "èµ„æºä½¿ç”¨é™åˆ¶"
        }
      },
      "required": [],
      "additionalProperties": false
    },
    
    "Session": {
      "type": "object",
      "description": "V8.0æ™ºèƒ½ä¼šè¯çŠ¶æ€",
      "properties": {
        "session_id": {
          "type": "string",
          "format": "uuid",
          "description": "ä¼šè¯å”¯ä¸€æ ‡è¯†ç¬¦"
        },
        "status": {
          "type": "string",
          "enum": ["active", "paused", "terminated", "error", "recovering"],
          "description": "ä¼šè¯çŠ¶æ€ï¼Œæ–°å¢recoveringæ™ºèƒ½æ¢å¤çŠ¶æ€"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "åˆ›å»ºæ—¶é—´"
        },
        "last_activity": {
          "type": "string",
          "format": "date-time",
          "description": "æœ€åæ´»åŠ¨æ—¶é—´"
        },
        "config": {
          "$ref": "#/definitions/SessionConfig",
          "description": "ä¼šè¯é…ç½®"
        },
        "health_metrics": {
          "$ref": "#/definitions/HealthMetrics",
          "description": "å®æ—¶å¥åº·æŒ‡æ ‡"
        },
        "performance_summary": {
          "$ref": "#/definitions/PerformanceSummary",
          "description": "æ€§èƒ½æ‘˜è¦ç»Ÿè®¡"
        },
        "decision_context": {
          "$ref": "#/definitions/DecisionContext",
          "description": "V8.0å†³ç­–ä¸Šä¸‹æ–‡"
        },
        "active_tabs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TabInfo"
          },
          "description": "æ´»è·ƒæ ‡ç­¾é¡µåˆ—è¡¨"
        }
      },
      "required": ["session_id", "status", "created_at", "config"]
    },
    
    "Viewport": {
      "type": "object",
      "properties": {
        "width": {
          "type": "integer",
          "minimum": 320,
          "maximum": 3840,
          "default": 1280
        },
        "height": {
          "type": "integer",
          "minimum": 240,
          "maximum": 2160,
          "default": 720
        },
        "device_scale_factor": {
          "type": "number",
          "minimum": 0.5,
          "maximum": 3.0,
          "default": 1.0
        },
        "is_mobile": {
          "type": "boolean",
          "default": false,
          "description": "ç§»åŠ¨è®¾å¤‡æ¨¡æ‹Ÿ"
        }
      },
      "required": ["width", "height"]
    },
    
    "ResourceLimits": {
      "type": "object",
      "description": "V8.0èµ„æºä½¿ç”¨é™åˆ¶",
      "properties": {
        "max_memory_mb": {
          "type": "integer",
          "minimum": 512,
          "maximum": 8192,
          "default": 2048
        },
        "max_cpu_percent": {
          "type": "integer",
          "minimum": 10,
          "maximum": 100,
          "default": 80
        },
        "max_execution_time_ms": {
          "type": "integer",
          "minimum": 1000,
          "maximum": 300000,
          "default": 30000
        }
      }
    }
  }
}
```

### **3.2 V8.0æ™ºèƒ½æ„ŸçŸ¥æ¨¡å‹**

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://rainbowcity.browser/schemas/v8/perception.json",
  
  "definitions": {
    "PerceptionMode": {
      "type": "string",
      "enum": ["fast", "standard", "deep", "adaptive"],
      "description": "V8.0ä¸‰å±‚æ„ŸçŸ¥æ¨¡å¼"
    },
    
    "IntelligentPerceptionResult": {
      "type": "object",
      "description": "V8.0æ™ºèƒ½æ„ŸçŸ¥ç»Ÿä¸€ç»“æœ",
      "properties": {
        "mode_used": {
          "$ref": "#/definitions/PerceptionMode",
          "description": "å®é™…ä½¿ç”¨çš„æ„ŸçŸ¥æ¨¡å¼"
        },
        "fast_data": {
          "$ref": "#/definitions/FastPerception",
          "description": "Fastå±‚æ•°æ®ï¼ˆæ‰€æœ‰æ¨¡å¼éƒ½åŒ…å«ï¼‰"
        },
        "standard_data": {
          "$ref": "#/definitions/StandardPerception",
          "description": "Standardå±‚æ•°æ®ï¼ˆStandard/Deepæ¨¡å¼åŒ…å«ï¼‰"
        },
        "deep_data": {
          "$ref": "#/definitions/DeepPerception",
          "description": "Deepå±‚æ•°æ®ï¼ˆä»…Deepæ¨¡å¼åŒ…å«ï¼‰"
        },
        "processing_metrics": {
          "$ref": "#/definitions/ProcessingMetrics",
          "description": "å¤„ç†æ€§èƒ½æŒ‡æ ‡"
        },
        "decision_explanation": {
          "$ref": "#/definitions/DecisionExplanation",
          "description": "V8.0å†³ç­–è§£é‡Š"
        }
      },
      "required": ["mode_used", "fast_data", "processing_metrics"]
    },
    
    "FastPerception": {
      "type": "object",
      "description": "Fastæ¨¡å¼æ„ŸçŸ¥ï¼ˆ<50msï¼‰ä¼˜åŒ–ç‰ˆæœ¬",
      "properties": {
        "page_ready": {
          "type": "boolean",
          "description": "é¡µé¢å°±ç»ªçŠ¶æ€"
        },
        "loading_state": {
          "type": "string",
          "enum": ["loading", "interactive", "complete"],
          "description": "é¡µé¢åŠ è½½çŠ¶æ€"
        },
        "key_elements": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/CoreElement"
          },
          "maxItems": 10,
          "description": "å…³é”®äº¤äº’å…ƒç´ "
        },
        "urgent_signals": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/UrgentSignal"
          },
          "description": "ç´§æ€¥ä¿¡å·ï¼ˆé”™è¯¯ã€å¼¹çª—ç­‰ï¼‰"
        },
        "layout_stability": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "å¸ƒå±€ç¨³å®šæ€§è¯„åˆ†"
        },
        "performance_hints": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "æ€§èƒ½ä¼˜åŒ–æç¤º"
        }
      },
      "required": ["page_ready", "loading_state", "key_elements"]
    },
    
    "StandardPerception": {
      "type": "object",
      "description": "Standardæ¨¡å¼æ„ŸçŸ¥ï¼ˆ<200msï¼‰å¹³è¡¡ç‰ˆæœ¬",
      "properties": {
        "enhanced_elements": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/EnhancedElement"
          },
          "maxItems": 30,
          "description": "å¢å¼ºçš„å…ƒç´ ä¿¡æ¯"
        },
        "page_context": {
          "$ref": "#/definitions/PageContext",
          "description": "é¡µé¢ä¸Šä¸‹æ–‡ä¿¡æ¯"
        },
        "interaction_map": {
          "$ref": "#/definitions/InteractionMap",
          "description": "äº¤äº’å…³ç³»æ˜ å°„"
        },
        "content_structure": {
          "$ref": "#/definitions/ContentStructure",
          "description": "å†…å®¹ç»“æ„åˆ†æ"
        },
        "workflow_hints": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/WorkflowHint"
          },
          "description": "å·¥ä½œæµç¨‹æç¤º"
        }
      },
      "required": ["enhanced_elements", "page_context", "interaction_map"]
    },
    
    "DeepPerception": {
      "type": "object",
      "description": "Deepæ¨¡å¼æ„ŸçŸ¥ï¼ˆ<500msï¼‰å…¨é¢ç‰ˆæœ¬",
      "properties": {
        "semantic_understanding": {
          "$ref": "#/definitions/SemanticUnderstanding",
          "description": "è¯­ä¹‰ç†è§£ç»“æœ"
        },
        "workflow_analysis": {
          "$ref": "#/definitions/WorkflowAnalysis",
          "description": "å·¥ä½œæµç¨‹åˆ†æ"
        },
        "performance_insights": {
          "$ref": "#/definitions/PerformanceInsights",
          "description": "æ€§èƒ½æ´å¯Ÿåˆ†æ"
        },
        "accessibility_audit": {
          "$ref": "#/definitions/AccessibilityAudit",
          "description": "å¯è®¿é—®æ€§å®¡è®¡"
        },
        "predictive_elements": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/PredictiveElement"
          },
          "description": "é¢„æµ‹æ€§å…ƒç´ è¯†åˆ«"
        },
        "intelligent_recommendations": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/IntelligentRecommendation"
          },
          "description": "V8.0æ™ºèƒ½å»ºè®®"
        }
      },
      "required": ["semantic_understanding", "workflow_analysis"]
    },
    
    "ProcessingMetrics": {
      "type": "object",
      "description": "å¤„ç†æ€§èƒ½æŒ‡æ ‡",
      "properties": {
        "actual_time_ms": {
          "type": "integer",
          "minimum": 0,
          "description": "å®é™…å¤„ç†æ—¶é—´"
        },
        "efficiency_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "æ•ˆç‡è¯„åˆ†ï¼ˆæ—¶é—´vsè´¨é‡å¹³è¡¡ï¼‰"
        },
        "resource_usage": {
          "type": "object",
          "properties": {
            "cpu_usage_percent": {"type": "number"},
            "memory_usage_mb": {"type": "number"},
            "cache_hit_rate": {"type": "number"}
          }
        },
        "quality_metrics": {
          "type": "object",
          "properties": {
            "completeness_score": {"type": "number"},
            "accuracy_confidence": {"type": "number"},
            "coverage_percentage": {"type": "number"}
          }
        }
      },
      "required": ["actual_time_ms", "efficiency_score"]
    }
  }
}
```

### **3.3 å…ƒç´ ä¸äº¤äº’æ¨¡å‹**

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://rainbowcity.browser/schemas/v8/elements.json",
  
  "definitions": {
    "CoreElement": {
      "type": "object",
      "description": "Fastæ¨¡å¼æ ¸å¿ƒå…ƒç´ è¯†åˆ«",
      "properties": {
        "element_id": {
          "type": "string",
          "description": "å…ƒç´ å”¯ä¸€æ ‡è¯†ç¬¦"
        },
        "element_type": {
          "type": "string",
          "enum": ["button", "input", "link", "select", "textarea", "checkbox", "radio", "form"],
          "description": "å…ƒç´ ç±»å‹"
        },
        "label": {
          "type": "string",
          "description": "å…ƒç´ æ ‡ç­¾æˆ–æ–‡æœ¬"
        },
        "is_visible": {
          "type": "boolean",
          "description": "æ˜¯å¦å¯è§"
        },
        "is_enabled": {
          "type": "boolean",
          "description": "æ˜¯å¦å¯ç”¨"
        },
        "importance_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "é‡è¦æ€§è¯„åˆ†"
        },
        "position": {
          "$ref": "#/definitions/ElementPosition"
        }
      },
      "required": ["element_id", "element_type", "is_visible", "is_enabled"]
    },
    
    "EnhancedElement": {
      "type": "object",
      "description": "Standardæ¨¡å¼å¢å¼ºå…ƒç´ ä¿¡æ¯",
      "allOf": [
        {"$ref": "#/definitions/CoreElement"},
        {
          "properties": {
            "semantic_label": {
              "type": "string",
              "description": "è¯­ä¹‰åŒ–æ ‡ç­¾ï¼ˆå¦‚'æäº¤è¡¨å•æŒ‰é’®'ï¼‰"
            },
            "context_info": {
              "$ref": "#/definitions/ElementContext",
              "description": "å…ƒç´ ä¸Šä¸‹æ–‡ä¿¡æ¯"
            },
            "interaction_capabilities": {
              "$ref": "#/definitions/InteractionCapabilities",
              "description": "äº¤äº’èƒ½åŠ›æè¿°"
            },
            "related_elements": {
              "type": "array",
              "items": {"type": "string"},
              "description": "ç›¸å…³è”çš„å…ƒç´ IDåˆ—è¡¨"
            },
            "accessibility_info": {
              "$ref": "#/definitions/AccessibilityInfo",
              "description": "å¯è®¿é—®æ€§ä¿¡æ¯"
            },
            "performance_hints": {
              "type": "array",
              "items": {"type": "string"},
              "description": "æ€§èƒ½ä¼˜åŒ–å»ºè®®"
            }
          }
        }
      ]
    },
    
    "ElementPosition": {
      "type": "object",
      "properties": {
        "x": {"type": "integer", "description": "Xåæ ‡"},
        "y": {"type": "integer", "description": "Yåæ ‡"},
        "width": {"type": "integer", "description": "å®½åº¦"},
        "height": {"type": "integer", "description": "é«˜åº¦"},
        "in_viewport": {"type": "boolean", "description": "æ˜¯å¦åœ¨è§†å£å†…"},
        "z_index": {"type": "integer", "description": "å±‚çº§ç´¢å¼•"}
      },
      "required": ["x", "y", "width", "height", "in_viewport"]
    },
    
    "InteractionCapabilities": {
      "type": "object",
      "properties": {
        "clickable": {"type": "boolean"},
        "editable": {"type": "boolean"},
        "draggable": {"type": "boolean"},
        "focusable": {"type": "boolean"},
        "scrollable": {"type": "boolean"},
        "supports_keyboard": {"type": "boolean"},
        "supports_touch": {"type": "boolean"},
        "expected_actions": {
          "type": "array",
          "items": {"type": "string"},
          "description": "æ¨èçš„äº¤äº’åŠ¨ä½œ"
        }
      }
    },
    
    "AccessibilityInfo": {
      "type": "object",
      "description": "V8.0å¯è®¿é—®æ€§ä¿¡æ¯",
      "properties": {
        "aria_label": {"type": "string"},
        "aria_role": {"type": "string"},
        "tab_index": {"type": "integer"},
        "keyboard_shortcuts": {
          "type": "array",
          "items": {"type": "string"}
        },
        "screen_reader_text": {"type": "string"},
        "wcag_compliance": {
          "type": "object",
          "properties": {
            "level": {"type": "string", "enum": ["A", "AA", "AAA"]},
            "issues": {"type": "array", "items": {"type": "string"}}
          }
        }
      }
    }
  }
}
```

### **3.4 V8.0æ ‡å‡†åŒ–å·¥å…·æ¨¡å‹**

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://rainbowcity.browser/schemas/v8/tools.json",
  
  "definitions": {
    "StandardTool": {
      "type": "object",
      "description": "V8.0æ ‡å‡†åŒ–å·¥å…·è°ƒç”¨",
      "properties": {
        "tool_id": {
          "type": "string",
          "format": "uuid",
          "description": "å·¥å…·è°ƒç”¨å”¯ä¸€æ ‡è¯†"
        },
        "tool_name": {
          "type": "string",
          "enum": [
            "navigate_to_url",
            "scroll_page", 
            "click",
            "type_text",
            "select_option",
            "wait_for_element",
            "wait_for_condition",
            "get_element_info",
            "take_screenshot",
            "retrieve_history",
            "report_insight",
            "complete_task"
          ],
          "description": "12ä¸ªæ ‡å‡†åŒ–å·¥å…·åç§°"
        },
        "parameters": {
          "type": "object",
          "description": "å·¥å…·ç‰¹å®šå‚æ•°",
          "additionalProperties": true
        },
        "execution_options": {
          "$ref": "#/definitions/ExecutionOptions",
          "description": "æ‰§è¡Œé€‰é¡¹é…ç½®"
        },
        "context": {
          "$ref": "#/definitions/ToolContext",
          "description": "V8.0å·¥å…·æ‰§è¡Œä¸Šä¸‹æ–‡"
        }
      },
      "required": ["tool_id", "tool_name", "parameters"]
    },
    
    "ExecutionOptions": {
      "type": "object",
      "description": "V8.0ç»Ÿä¸€æ‰§è¡Œé€‰é¡¹",
      "properties": {
        "timeout_ms": {
          "type": "integer",
          "minimum": 100,
          "maximum": 30000,
          "default": 5000,
          "description": "æ‰§è¡Œè¶…æ—¶æ—¶é—´"
        },
        "retry_policy": {
          "type": "string",
          "enum": ["none", "simple", "smart", "adaptive"],
          "default": "smart",
          "description": "é‡è¯•ç­–ç•¥"
        },
        "error_recovery": {
          "type": "boolean",
          "default": true,
          "description": "å¯ç”¨æ™ºèƒ½é”™è¯¯æ¢å¤"
        },
        "performance_priority": {
          "type": "string",
          "enum": ["speed", "accuracy", "balance"],
          "default": "balance",
          "description": "æ€§èƒ½ä¼˜å…ˆçº§"
        },
        "resource_constraints": {
          "$ref": "#/definitions/ResourceConstraints",
          "description": "èµ„æºçº¦æŸé…ç½®"
        }
      }
    },
    
    "ToolResult": {
      "type": "object",
      "description": "å·¥å…·æ‰§è¡Œç»“æœ",
      "properties": {
        "tool_id": {
          "type": "string",
          "format": "uuid"
        },
        "status": {
          "type": "string",
          "enum": ["pending", "running", "success", "failed", "timeout", "recovered"],
          "description": "æ‰§è¡ŒçŠ¶æ€ï¼Œæ–°å¢recoveredæ¢å¤çŠ¶æ€"
        },
        "result_data": {
          "type": "object",
          "description": "ç»“æœæ•°æ®ï¼ˆæ ¹æ®å·¥å…·ç±»å‹è€Œå®šï¼‰",
          "additionalProperties": true
        },
        "error_info": {
          "$ref": "#/definitions/ErrorInfo",
          "description": "é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœå¤±è´¥ï¼‰"
        },
        "performance_metrics": {
          "$ref": "#/definitions/ToolPerformanceMetrics",
          "description": "æ‰§è¡Œæ€§èƒ½æŒ‡æ ‡"
        },
        "recovery_actions": {
          "type": "array",
          "items": {"type": "string"},
          "description": "V8.0æ¢å¤åŠ¨ä½œè®°å½•"
        }
      },
      "required": ["tool_id", "status"]
    },
    
    "ErrorInfo": {
      "type": "object",
      "description": "V8.0å¢å¼ºé”™è¯¯ä¿¡æ¯",
      "properties": {
        "error_code": {
          "type": "string",
          "description": "æ ‡å‡†åŒ–é”™è¯¯ä»£ç "
        },
        "error_message": {
          "type": "string",
          "description": "é”™è¯¯æè¿°"
        },
        "error_category": {
          "type": "string",
          "enum": ["network", "element", "timeout", "permission", "resource", "logic"],
          "description": "é”™è¯¯åˆ†ç±»"
        },
        "is_recoverable": {
          "type": "boolean",
          "description": "æ˜¯å¦å¯æ¢å¤"
        },
        "suggested_actions": {
          "type": "array",
          "items": {"type": "string"},
          "description": "å»ºè®®çš„è§£å†³æ–¹æ¡ˆ"
        },
        "diagnostic_info": {
          "type": "object",
          "description": "è¯Šæ–­ä¿¡æ¯",
          "additionalProperties": true
        }
      },
      "required": ["error_code", "error_message", "error_category"]
    }
  }
}
```

### **3.5 æ™ºèƒ½å†³ç­–ä¸ä¸Šä¸‹æ–‡æ¨¡å‹**

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://rainbowcity.browser/schemas/v8/decision.json",
  
  "definitions": {
    "DecisionContext": {
      "type": "object",
      "description": "V8.0æ™ºèƒ½å†³ç­–ä¸Šä¸‹æ–‡",
      "properties": {
        "session_history": {
          "$ref": "#/definitions/SessionHistory",
          "description": "ä¼šè¯å†å²ä¿¡æ¯"
        },
        "performance_profile": {
          "$ref": "#/definitions/PerformanceProfile",
          "description": "æ€§èƒ½ç‰¹å¾æè¿°"
        },
        "user_preferences": {
          "$ref": "#/definitions/UserPreferences",
          "description": "ç”¨æˆ·åå¥½è®¾ç½®"
        },
        "system_state": {
          "$ref": "#/definitions/SystemState",
          "description": "ç³»ç»Ÿå½“å‰çŠ¶æ€"
        },
        "learning_data": {
          "$ref": "#/definitions/LearningData",
          "description": "å­¦ä¹ ç§¯ç´¯æ•°æ®"
        }
      }
    },
    
    "DecisionExplanation": {
      "type": "object",
      "description": "å†³ç­–è§£é‡Šä¿¡æ¯",
      "properties": {
        "decision_factors": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "factor": {"type": "string"},
              "weight": {"type": "number"},
              "description": {"type": "string"}
            }
          },
          "description": "å†³ç­–å› å­åˆ†æ"
        },
        "alternative_options": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "option": {"type": "string"},
              "score": {"type": "number"},
              "reason": {"type": "string"}
            }
          },
          "description": "å¤‡é€‰æ–¹æ¡ˆè¯„åˆ†"
        },
        "confidence_level": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "å†³ç­–ç½®ä¿¡åº¦"
        },
        "expected_outcome": {
          "type": "string",
          "description": "é¢„æœŸç»“æœæè¿°"
        }
      }
    },
    
    "HealthMetrics": {
      "type": "object",
      "description": "V8.0ç³»ç»Ÿå¥åº·æŒ‡æ ‡",
      "properties": {
        "overall_health": {
          "type": "string",
          "enum": ["excellent", "good", "degraded", "critical"],
          "description": "æ•´ä½“å¥åº·çŠ¶æ€"
        },
        "resource_usage": {
          "type": "object",
          "properties": {
            "cpu_usage_percent": {"type": "number"},
            "memory_usage_percent": {"type": "number"},
            "disk_usage_percent": {"type": "number"},
            "network_latency_ms": {"type": "number"}
          }
        },
        "performance_indicators": {
          "type": "object",
          "properties": {
            "avg_response_time_ms": {"type": "number"},
            "success_rate_percent": {"type": "number"},
            "error_rate_percent": {"type": "number"},
            "recovery_rate_percent": {"type": "number"}
          }
        },
        "active_alerts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/HealthAlert"
          },
          "description": "æ´»è·ƒå‘Šè­¦åˆ—è¡¨"
        },
        "trend_analysis": {
          "type": "object",
          "properties": {
            "performance_trend": {"type": "string", "enum": ["improving", "stable", "degrading"]},
            "resource_trend": {"type": "string", "enum": ["optimizing", "stable", "increasing"]},
            "prediction": {"type": "string", "description": "è¶‹åŠ¿é¢„æµ‹"}
          }
        }
      },
      "required": ["overall_health", "resource_usage", "performance_indicators"]
    },
    
    "HealthAlert": {
      "type": "object",
      "properties": {
        "alert_id": {"type": "string"},
        "severity": {
          "type": "string",
          "enum": ["info", "warning", "error", "critical"]
        },
        "category": {
          "type": "string",
          "enum": ["performance", "resource", "error", "security"]
        },
        "message": {"type": "string"},
        "timestamp": {"type": "string", "format": "date-time"},
        "suggested_action": {"type": "string"},
        "auto_recovery_available": {"type": "boolean"}
      },
      "required": ["alert_id", "severity", "category", "message", "timestamp"]
    }
  }
}
```

### **3.6 æ€§èƒ½ä¸ç›‘æ§æ¨¡å‹**

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://rainbowcity.browser/schemas/v8/performance.json",
  
  "definitions": {
    "PerformanceSummary": {
      "type": "object",
      "description": "V8.0æ€§èƒ½æ‘˜è¦ç»Ÿè®¡",
      "properties": {
        "perception_performance": {
          "type": "object",
          "properties": {
            "fast_avg_ms": {"type": "number", "description": "Fastæ¨¡å¼å¹³å‡æ—¶é—´"},
            "standard_avg_ms": {"type": "number", "description": "Standardæ¨¡å¼å¹³å‡æ—¶é—´"},
            "deep_avg_ms": {"type": "number", "description": "Deepæ¨¡å¼å¹³å‡æ—¶é—´"},
            "adaptive_efficiency": {"type": "number", "description": "è‡ªé€‚åº”æ¨¡å¼æ•ˆç‡"}
          }
        },
        "tool_performance": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "success_rate": {"type": "number"},
              "avg_duration_ms": {"type": "number"},
              "error_recovery_rate": {"type": "number"},
              "usage_frequency": {"type": "integer"}
            }
          },
          "description": "å„å·¥å…·æ€§èƒ½ç»Ÿè®¡"
        },
        "system_efficiency": {
          "type": "object",
          "properties": {
            "memory_efficiency": {"type": "number", "description": "å†…å­˜ä½¿ç”¨æ•ˆç‡"},
            "cpu_optimization": {"type": "number", "description": "CPUä¼˜åŒ–ç¨‹åº¦"},
            "cache_effectiveness": {"type": "number", "description": "ç¼“å­˜æœ‰æ•ˆæ€§"},
            "overall_optimization": {"type": "number", "description": "æ•´ä½“ä¼˜åŒ–æ°´å¹³"}
          }
        },
        "intelligent_insights": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "insight_type": {"type": "string"},
              "description": {"type": "string"},
              "impact_level": {"type": "string", "enum": ["low", "medium", "high"]},
              "recommended_action": {"type": "string"}
            }
          },
          "description": "æ™ºèƒ½æ€§èƒ½æ´å¯Ÿ"
        }
      }
    },
    
    "ToolPerformanceMetrics": {
      "type": "object",
      "description": "å•ä¸ªå·¥å…·æ‰§è¡Œæ€§èƒ½æŒ‡æ ‡",
      "properties": {
        "execution_time_ms": {"type": "integer"},
        "queue_time_ms": {"type": "integer"},
        "retry_count": {"type": "integer"},
        "resource_consumption": {
          "type": "object",
          "properties": {
            "cpu_time_ms": {"type": "number"},
            "memory_peak_mb": {"type": "number"},
            "network_bytes": {"type": "integer"}
          }
        },
        "efficiency_metrics": {
          "type": "object",
          "properties": {
            "time_efficiency": {"type": "number"},
            "resource_efficiency": {"type": "number"},
            "success_efficiency": {"type": "number"}
          }
        }
      }
    }
  }
}
```

## **å››ã€æ•°æ®æ¨¡å‹çš„ç‰ˆæœ¬ç®¡ç†ä¸å…¼å®¹æ€§**

### **4.1 V8.0æ•°æ®æ¨¡å‹æ ¸å¿ƒå˜åŒ–**
```yaml
ä»7.0åˆ°8.0çš„æ¼”è¿›:
  æ„ŸçŸ¥æ¨¡å‹ç®€åŒ–: 4å±‚â†’3å±‚ï¼Œæ•°æ®ç»“æ„ç²¾ç®€30%
  æ™ºèƒ½ä¸Šä¸‹æ–‡å¢å¼º: æ–°å¢DecisionContextå’ŒDecisionExplanation
  é”™è¯¯æ¨¡å‹ä¼˜åŒ–: å¢å¼ºé”™è¯¯åˆ†ç±»å’Œæ¢å¤æœºåˆ¶
  æ€§èƒ½æ¨¡å‹ç»Ÿä¸€: æ ‡å‡†åŒ–æ‰€æœ‰æ€§èƒ½æŒ‡æ ‡æ ¼å¼
  
å…¼å®¹æ€§ä¿è¯:
  - æ ¸å¿ƒå­—æ®µä¿æŒå…¼å®¹
  - æ–°å¢å­—æ®µå‡ä¸ºå¯é€‰
  - æä¾›7.0åˆ°8.0çš„è‡ªåŠ¨è½¬æ¢å·¥å…·
```

### **4.2 å‘åå…¼å®¹ç­–ç•¥**
```yaml
å…¼å®¹åŸåˆ™:
  - å¿…éœ€å­—æ®µä¸èƒ½åˆ é™¤æˆ–æ”¹å
  - å¯é€‰å­—æ®µå¯ä»¥æ–°å¢
  - æšä¸¾å€¼åªèƒ½æ‰©å±•ï¼Œä¸èƒ½åˆ é™¤
  - æ•°æ®ç±»å‹ä¸èƒ½æ ¹æœ¬æ€§æ”¹å˜

è¿ç§»æ”¯æŒ:
  - æä¾›æ•°æ®æ¨¡å‹è½¬æ¢å·¥å…·
  - è‡ªåŠ¨æ£€æµ‹ç‰ˆæœ¬å·®å¼‚
  - æ™ºèƒ½å¡«å……é»˜è®¤å€¼
  - éªŒè¯è½¬æ¢ç»“æœ
```

### **4.3 æ‰©å±•æœºåˆ¶**
```yaml
æ‰©å±•æ–¹å¼:
  - additionalPropertiesæ”¯æŒå‚å•†æ‰©å±•
  - x-å‰ç¼€å­—æ®µç”¨äºå®éªŒæ€§åŠŸèƒ½
  - ç»„åˆæ¨¡å¼æ”¯æ’‘å¤æ‚åœºæ™¯
  - æ’ä»¶æ¥å£é¢„ç•™æ‰©å±•ç‚¹

è´¨é‡ä¿è¯:
  - JSON Schemaè‡ªåŠ¨éªŒè¯
  - TypeScriptç±»å‹ç”Ÿæˆ
  - å•å…ƒæµ‹è¯•è¦†ç›–
  - æ–‡æ¡£è‡ªåŠ¨åŒæ­¥
```

## **äº”ã€è·¨è¯­è¨€æ”¯æŒä¸å·¥å…·é›†æˆ**

### **5.1 å¤šè¯­è¨€ç±»å‹ç”Ÿæˆ**
```yaml
æ”¯æŒè¯­è¨€:
  - TypeScript: å®Œæ•´ç±»å‹å®šä¹‰å’Œæ™ºèƒ½æç¤º
  - Python: Pydanticæ¨¡å‹å’Œæ•°æ®éªŒè¯
  - Go: ç»“æ„ä½“å®šä¹‰å’ŒJSONæ ‡ç­¾
  - Java: POJOç±»å’ŒJacksonæ³¨è§£
  - Rust: Serdeç»“æ„ä½“å’Œåºåˆ—åŒ–

ç”Ÿæˆå·¥å…·:
  - quicktype: JSON Schemaåˆ°å¤šè¯­è¨€ç±»å‹
  - openapi-generator: APIå®¢æˆ·ç«¯ç”Ÿæˆ
  - json-schema-to-typescript: TSç±»å‹ç”Ÿæˆ
```

### **5.2 IDEé›†æˆä¸å¼€å‘ä½“éªŒ**
```yaml
IDEæ”¯æŒ:
  - VSCode: JSON SchemaéªŒè¯å’Œè‡ªåŠ¨å®Œæˆ
  - IntelliJ: ç±»å‹æ£€æŸ¥å’Œé‡æ„æ”¯æŒ
  - Vim/Neovim: LSPé›†æˆå’Œè¯­æ³•é«˜äº®

å¼€å‘å·¥å…·:
  - åœ¨çº¿Schemaç¼–è¾‘å™¨
  - æ•°æ®éªŒè¯å·¥å…·
  - ç¤ºä¾‹æ•°æ®ç”Ÿæˆå™¨
  - å·®å¼‚æ¯”è¾ƒå·¥å…·
```

## **å…­ã€ä¸æ°´å·æ¶æ„çš„æ·±åº¦é›†æˆ**

### **6.1 æ•°æ®æ¨¡å‹ä¸æ°´å·æ¨¡å—æ˜ å°„**
```yaml
æ¨¡å‹æ˜ å°„å…³ç³»:
  IntelligentPerceptionResult â†’ Layered-Perception
  StandardTool â†’ Intelligent-Action
  Session/HealthMetrics â†’ Unified-Kernel
  DecisionContext â†’ StateCenteräº‹ä»¶æ•°æ®

æ•°æ®æµå‘:
  æ„ŸçŸ¥æ•°æ®: Layered-Perception â†’ API â†’ å®¢æˆ·ç«¯
  æ‰§è¡ŒæŒ‡ä»¤: å®¢æˆ·ç«¯ â†’ API â†’ Intelligent-Action
  çŠ¶æ€åŒæ­¥: Unified-Kernel â†’ API â†’ å®¢æˆ·ç«¯
```

### **6.2 æ™ºèƒ½å†³ç­–æ•°æ®æ”¯æŒ**
- **å†³ç­–ä¸Šä¸‹æ–‡ä¼ é€’**ï¼šDecisionContextæºå¸¦å®Œæ•´å†³ç­–ä¿¡æ¯
- **æ€§èƒ½åé¦ˆå¾ªç¯**ï¼šPerformanceMetricsæŒ‡å¯¼åç»­ä¼˜åŒ–
- **é”™è¯¯æ™ºèƒ½å¤„ç†**ï¼šErrorInfoæ”¯æŒè‡ªåŠ¨æ¢å¤å†³ç­–

## **ä¸ƒã€æ•°æ®å®‰å…¨ä¸éšç§ä¿æŠ¤**

### **7.1 æ•æ„Ÿæ•°æ®å¤„ç†**
```yaml
æ•°æ®åˆ†ç±»:
  å…¬å¼€æ•°æ®: é¡µé¢ç»“æ„ã€æ€§èƒ½æŒ‡æ ‡
  æ•æ„Ÿæ•°æ®: ç”¨æˆ·è¾“å…¥ã€ä¸ªäººä¿¡æ¯  
  æœºå¯†æ•°æ®: ä¼šè¯tokenã€ç³»ç»Ÿé…ç½®

ä¿æŠ¤æªæ–½:
  - æ•æ„Ÿå­—æ®µåŠ å¯†ä¼ è¾“
  - ä¸ªäººä¿¡æ¯è‡ªåŠ¨è„±æ•
  - è®¿é—®æƒé™ç»†ç²’åº¦æ§åˆ¶
  - æ•°æ®ç”Ÿå‘½å‘¨æœŸç®¡ç†
```

### **7.2 åˆè§„æ€§æ”¯æŒ**
```yaml
åˆè§„æ ‡å‡†:
  - GDPR: æ•°æ®ä¸»ä½“æƒåˆ©æ”¯æŒ
  - CCPA: æ¶ˆè´¹è€…éšç§æƒä¿æŠ¤
  - SOC2: ä¿¡æ¯å®‰å…¨æ§åˆ¶
  - ISO27001: ä¿¡æ¯å®‰å…¨ç®¡ç†

æŠ€æœ¯æªæ–½:
  - æ•°æ®æœ€å°åŒ–åŸåˆ™
  - ç”¨é€”é™åˆ¶å’ŒåŒæ„ç®¡ç†
  - æ•°æ®å¯æºå¸¦æ€§æ”¯æŒ
  - åˆ é™¤æƒçš„æŠ€æœ¯å®ç°
```

---

> *"æ•°æ®å¦‚é‡‘ï¼Œç»“æ„å¦‚å™¨ã€‚ç®€çº¦è€Œæ™ºèƒ½ï¼Œç±»å‹è€Œå®‰å…¨ã€‚V8.0æ•°æ®æ¨¡å‹ï¼Œæ‰¿è½½AIå†³ç­–ä¹‹æ™ºæ…§ã€‚"*

**æ–‡æ¡£ç‰ˆæœ¬**: V8.0  
**åˆ›å»ºæ—¶é—´**: 2024-01  
**æ–‡æ¡£çŠ¶æ€**: âœ… æ¨¡å¼ç¡®ç«‹  
**ç¨³å®šç­‰çº§**: ğŸ† ç”Ÿäº§å°±ç»ª